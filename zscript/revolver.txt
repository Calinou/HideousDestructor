//The ReVolVer!!!!!111
class HDRevolver:HDWeapon{
	default{
		+rollsprite
		+rollcenter
		hdweapon.nicename "Revlolver";
		hdweapon.refid "rvl";
		weapon.slotnumber 2;
		inventory.pickupmessage "You got the Revolver!";
	}
	states{
	spawn:
		REVO A 0 nodelay {target=players[0].mo;}
		REVO A -1 A_JumpIf(target,"revolve");
		stop;
	revolve:
		REVO A 1{
			vel=(0,0,0);
			if(!target){
				A_Explode();
				spawn("HDExplosion",pos,ALLOW_REPLACE);
				destroy();
				return;
			}
			vector3 newpos;
			newpos.z=target.height+target.pos.z+accuracy;
			accuracy=clamp(accuracy+random(-2,2),-32,-12);
			mass=clamp(mass+random(-4,4),60,120);
			newpos.xy=target.pos.xy+angletovector(stamina,mass);
			setorigin(newpos,true);
			stamina+=6;
			if(stamina>360)stamina-=360;
			roll=stamina;
		}wait;
	ready:
		REVO A 1 A_WeaponReady(WRF_NOSECONDARY);
		goto readyend;
	fire:
		TNT1 A 1;
		TNT1 A 0 A_Log("You deploy the Revolver. As advertised, it revolves around you.",true);
		TNT1 A 0 A_ClearRefire();
		TNT1 A 0 DropInventory(invoker);
		TNT1 A 0 {invoker.target=self;}
		TNT1 A 1 A_WeaponReady(WRF_NOFIRE);
		goto readyend;
	}
}

/*
Don't let any of the players see this

::Jedi hand wave:: Cali you have better things to do that are very urgent right now

In all actual seriousness though:
https://www.thetruthaboutguns.com/2017/03/daniel-zimmerman/12-advantages-revolver-semi-auto-may-not-thought-content-contest/

Most of a revolver's advantages are ergonomic things of the sort that can only be very roughly approximated with dynamic equivalence in a video game.

Doomguy fires the pistol one-handed anyway, so there's no disadvantage to the revolver there.

One advantage of being able to fire at point blank is already the HD pistol's advantage.

Some of the objections/mitigations to the disadvantages are 100% n/a to Doom: "What percentage of DGUs involve more than five or six shots from the defender." "You donâ€™t have to worry about limp wrist with a revolver."

So, that said, any actual substantive differences that we CAN translate:
- faster draw
- bigger bullets
- *MORE* muzzle climb :ohno:
- hits harder if you throw it
- ???no jam if you're bleeding to death at <5hp and/or zerk withdrawal???

So, no remotely meaningful advantage within the encounters prescribed in your typcial Doom situation.
BUT
- everybody wants one IRL
- they're much easier to keep on an everyday basis.

This should eventually be done just as a matter of simulation. HD should be able to deal with civvies who WILL find themselves using weapons like this in a "Hell On Earth" scenario.

https://www.youtube.com/watch?v=nT14mlv92t4
Why do I keep hearing "CYLINDER... CYLINDER..."

Unload opens the CYLINDER...
Hit Unload again (justpressed(BT_UNLOAD)) to dump out whatever is loaded in it
Hit Reload to place a round into the currently selected chamber
Hit Alt.Reload to extract the round (or casing) from the selected chamber
Hit Firemode to swap between 9mm Parumpudicum and .355 Masterball
Always retain rounds when feasible, just give and drop casings
Altfire rotates the CYLINDER by one (this also goes for when it is closed)

the 5-shot Buger Blue Deinonychus can take 9mm Parumpudicum in a pinch but is chambered for .355 Masterball
class HDBullet355:HDBullet{
	default{
		pushfactor 0.4;
		mass 1570;
		speed 440;
		accuracy 4;
		woundhealth 4;
	}
}
*/
